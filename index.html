<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación Estocástica</title>
    
    <!-- Agregar Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="bg-light">
<!-- Contenedor para la barra de navegación -->
    <div id="navbar-placeholder"></div>

    <div class="container mt-4">
        <div class="card shadow">
            <div class="card-body">
                <h2 class="text-center">Simulación Estocástica</h2>

                <!-- Formulario con Bootstrap -->
                <form action="corridas.php" method="POST">
                    
                    <div class="mb-3">
                        <label for="Corridas" class="form-label">Número de corridas</label>
                        <input type="number" name="Corridas" id="Corridas" class="form-control" min="1">
                    </div>

                    <div class="mb-3">
                        <label for="Estados" class="form-label">Número de estados</label>
                        <input type="number" name="Estados" id="Estados" class="form-control" min="1" oninput="generarMatriz()">
                    </div>

                    <div class="mb-3">
                        <label for="EstadoInicial" class="form-label">Estado inicial</label>
                        <input type="number" name="EstadoInicial" id="EstadoInicial" class="form-control" min="1">
                    </div>

                    <!-- Contenedor donde se generará la matriz -->
                    <div class="table-responsive">
                        <table class="table table-bordered text-center mt-3" id="formMatriz">
                            <!-- Aquí se generará la matriz dinámicamente -->
                        </table>
                    </div>

                    <div class="text-center mt-3">
                        <button type="submit" class="btn btn-dark btn-block">Enviar</button>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <!-- Script de Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Agregar jQuery antes de usar la función load() -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        //barra de navegación
        $(function() {
            $("#navbar-placeholder").load("./barraNavegacion.html");
        });
    </script>

    <!-- Script para generar la matriz -->
    <script>
        function generarMatriz() {
            let numEstados = document.getElementById("Estados").value;
            let contenedor = document.getElementById("formMatriz");
            contenedor.innerHTML = ""; // Limpiar tabla anterior

            if (numEstados < 1) return; // No generar tabla si el número de estados es menor a 1

            // Crear la fila de encabezado
            let headerRow = document.createElement("tr");
            headerRow.innerHTML = `<th class="bg-dark text-white"> # </th>`; // Celda vacía en la esquina superior izquierda
            for (let i = 1; i <= numEstados; i++) {
                headerRow.innerHTML += `<th class="bg-dark text-white">S${i}</th>`;
            }
            contenedor.appendChild(headerRow);

            // Crear la matriz de inputs (n x n)
            for (let i = 1; i <= numEstados; i++) {
                let fila = document.createElement("tr");

                // Encabezado de la fila (estado origen)
                fila.innerHTML = `<th class="bg-dark text-white">S${i}</th>`;

                for (let j = 1; j <= numEstados; j++) {
                    let celda = document.createElement("td");

                    let input = document.createElement("input");
                    input.type = "number";
                    input.min = "0";
                    input.max = "1";
                    input.step = "0.01";
                    input.className = "form-control text-center"; // Agrega clases de Bootstrap
                    input.name = `matrizTransicion[S${i}][S${j}]`;

                    celda.appendChild(input);
                    fila.appendChild(celda);
                }
                contenedor.appendChild(fila);
            }
        }
    </script>

</body>
</html>
